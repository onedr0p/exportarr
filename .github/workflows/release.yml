name: release

on:
  push:
    tags:
      - v*.*.*

jobs:
  go-tests:
    if: "!contains(github.event.head_commit.message, '[ci-skip]')"
    uses: ./.github/workflows/tests.yaml

  container-release:
    if: "!contains(github.event.head_commit.message, '[ci-skip]')"
    uses: ./.github/workflows/docker-image.yaml

  go-release:
    if: "!contains(github.event.head_commit.message, '[ci-skip]')"
    uses: ./.github/workflows/go-release.yaml
